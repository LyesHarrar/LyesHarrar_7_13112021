{"remainingRequest":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\src\\components\\NewComment.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\src\\components\\NewComment.vue","mtime":1609954819000},{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636700259092},{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1636700283426},{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636700259092},{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1636700288853}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJOZXdDb21tZW50IiwKICAgIHByb3BzIDogewogICAgICAgIHBvc3RJRDogewogICAgICAgICAgICB0eXBlOiBOdW1iZXIKICAgICAgICB9CiAgICB9LAogICAgZGF0YTogKCkgPT4gewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIG5ld0NvbW1lbnQgOiB7CiAgICAgICAgICAgICAgICBjb21tZW50VGV4dDogIiIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgcHVibGlzaCgpIHsKICAgICAgICAgICAgbGV0IHVybCA9IGBodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2NvbW1lbnQvJHsgdGhpcy5wb3N0SUQgfS9gCiAgICAgICAgICAgIGxldCBvcHRpb25zID0gewogICAgICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0aGlzLm5ld0NvbW1lbnQpLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIiksCiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZldGNoKHVybCwgb3B0aW9ucykKICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKQogICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMubmV3Q29tbWVudC5jb21tZW50VGV4dCA9ICIiOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoImNvbW1lbnQtcHVibGlzaGVkIik7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IGVycm9yCiAgICAgICAgICAgICAgICB9KQogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["NewComment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NewComment.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <form\n        v-on:submit.prevent=\"publish\"\n        :postID=\"postID\"\n        class=\"new-comment\">\n        <textarea\n            v-model=\"newComment.commentText\"\n            class=\"new-comment\"\n            placeholder=\"Votre commentaire bienveillant\"\n            rows=\"3\"\n            cols=\"10\"\n            required>\n        </textarea>\n        <button>Commenter cette publication</button>\n    </form>\n</template>\n\n<script>\nexport default {\n    name: \"NewComment\",\n    props : {\n        postID: {\n            type: Number\n        }\n    },\n    data: () => {\n        return {\n            newComment : {\n                commentText: \"\"\n            }\n        }\n    },\n    methods: {\n        publish() {\n            let url = `http://localhost:3000/api/comment/${ this.postID }/`\n            let options = {\n                method: \"POST\",\n                body: JSON.stringify(this.newComment),\n                headers: {\n                    'Authorization': 'Bearer ' + localStorage.getItem(\"token\"),\n                    'Content-Type': 'application/json'\n                }\n            }\n            fetch(url, options)\n                .then(res => res.json())\n                .then(() => {\n                    this.newComment.commentText = \"\";\n                    this.$emit(\"comment-published\");\n                })\n                .catch(error => {\n                    this.errorMessage = error\n                })\n        }\n    }\n}\n</script>\n\n<style lang=\"css\">\n@import '../style/style.css'\n</style>"]}]}