{"remainingRequest":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\src\\views\\NewPost.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\src\\views\\NewPost.vue","mtime":1609954819000},{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636700259092},{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1636700283426},{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636700259092},{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1636700288853}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIb21lTmF2IGZyb20gJy4uL2NvbXBvbmVudHMvSG9tZU5hdicKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ05ld1Bvc3QnLAogICAgY29tcG9uZW50czogewogICAgICAgIEhvbWVOYXYKICAgIH0sCiAgICBkYXRhOiAoKSA9PiB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgcG9zdEluZm8gOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIiIsCiAgICAgICAgICAgICAgICBnaWZVcmw6ICIiLAogICAgICAgICAgICAgICAgdGV4dDogIiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdXBkYXRlTWVzc2FnZSA6ICIiLAogICAgICAgICAgICBwdWJsaXNoZWQ6IGZhbHNlLAogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgcHVibGlzaCgpIHsKICAgICAgICAgICAgbGV0IHVybCA9ICJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3Bvc3QiCiAgICAgICAgICAgIGxldCBvcHRpb25zID0gewogICAgICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0aGlzLnBvc3RJbmZvKSwKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpLAogICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmZXRjaCh1cmwsIG9wdGlvbnMpCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSkKICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYocmVzLm9rKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdEluZm8gPSB7fQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU1lc3NhZ2UgPSByZXMubWVzc2FnZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnB1Ymxpc2hlZCA9IHRydWU7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBlcnJvcgogICAgICAgICAgICB9KQogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["NewPost.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NewPost.vue","sourceRoot":"src/views","sourcesContent":["<template>\n\t<div class=\"container\">\n\t\t<HomeNav></HomeNav>\n\t\t<h1>Ajouter une publication</h1>\n\t\t<form v-on:submit.prevent=\"publish\">\n\t\t\t<fieldset>\n\t\t\t\t<label for=\"post-title\">Titre *\n\t\t\t\t\t<input\n                        v-model=\"postInfo.title\"\n                        type=\"text\"\n                        id=\"post-title\"\n                        name=\"post-title\"\n                        placeholder=\"Titre de votre publication\"\n                        required\n                    />\n\t\t\t\t</label>\n\t\t\t</fieldset>\n\t\t\t<fieldset>\n\t\t\t\t<label for=\"gif-url\">URL du gif *\n\t\t\t\t\t<input\n                        v-model=\"postInfo.gifUrl\"\n                        type=\"url\"\n                        id=\"gif-url\"\n                        placeholder=\"Lien vers le fichier GIPHY par exemple\"\n                        required\n                    />\n\t\t\t\t</label>\n\t\t\t</fieldset>\n\t\t\t<fieldset>\n\t\t\t\t<label for=\"post-content\">Texte *\n\t\t\t\t\t<textarea\n                        v-model=\"postInfo.text\"\n                        id=\"post-content\"\n                        name=\"post-content\"\n                        required>\n                    </textarea>\n\t\t\t\t</label>\n\t\t\t</fieldset>\n\t\t\t<p class=\"alert-msg\" v-if=\"updateMessage.length >= 1\">{{ updateMessage }}</p>\n\t\t\t<button type=\"submit\" id=\"post-upload\">Publier</button>\n\t\t\t<router-link v-if=\"published\" to=\"/forum\" tag=\"button\">Se rendre sur le forum</router-link>\n\t\t</form>\n\t</div>\n</template>\n\n<script>\nimport HomeNav from '../components/HomeNav'\nexport default {\n    name: 'NewPost',\n    components: {\n        HomeNav\n    },\n    data: () => {\n        return {\n            postInfo : {\n                title: \"\",\n                gifUrl: \"\",\n                text: \"\"\n            },\n            updateMessage : \"\",\n            published: false,\n        }\n    },\n    methods: {\n        publish() {\n            let url = \"http://localhost:3000/api/post\"\n            let options = {\n                method: \"POST\",\n                body: JSON.stringify(this.postInfo),\n                headers: {\n                    'Authorization': 'Bearer ' + localStorage.getItem(\"token\"),\n                    'Content-Type': 'application/json'\n                }\n            }\n            fetch(url, options)\n                .then(res => res.json())\n                .then(res => {\n                    if(res.ok) {\n                        this.postInfo = {}\n                    }\n                    this.updateMessage = res.message;\n                    this.published = true;\n                })\n            .catch(error => {\n                this.errorMessage = error\n            })\n        }\n    }\n}\n</script>\n\n<style lang=\"css\">\n@import '../style/style.css'\n</style>"]}]}