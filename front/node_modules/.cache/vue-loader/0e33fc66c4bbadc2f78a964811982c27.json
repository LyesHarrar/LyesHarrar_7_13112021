{"remainingRequest":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\src\\views\\Feed.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\src\\views\\Feed.vue","mtime":1609954819000},{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\css-loader\\dist\\cjs.js","mtime":1636700267689},{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1636700306457},{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\postcss-loader\\src\\index.js","mtime":1636700280736},{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636700259092},{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1636700288853}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBpbXBvcnQgIi4uL3N0eWxlL3N0eWxlLmNzcyI7Cg=="},{"version":3,"sources":["Feed.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA","file":"Feed.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"container\">\n        <HomeNav></HomeNav>\n        <h1 id=\"forum-title\">Fil d'actualité</h1>\n        <h2 v-if=\"updateMessage.length >= 1\" class=\"alert-msg\">{{ updateMessage }}</h2>\n        <p v-if=\"postList.length >= 1\">{{ postList.length }} publication<span v-if=\"postList.length >= 2\">s</span></p>\n\n        <div v-if=\"mostRecent\" class=\"post-comment-container\">\n            <button\n                @click=\"mostRecent = false\"\n                v-if=\"postList.length >= 1\"\n                class=\"orderby-button\"\n                >Les + récentes d'abord\n                <img src=\"../assets/arrow.png\" alt=\"Flèche de tri descendante\" />\n            </button>\n            <Post\n                v-for=\"post in descList\"\n                v-bind:key=\"post.postID\"\n                :postID=\"post.postID\"\n                @post-deleted=\"getPostsList\"\n            ></Post>\n        </div>\n\n        <div v-if=\"!mostRecent\" class=\"post-comment-container\">\n            <button\n                @click=\"mostRecent = true\"\n                v-if=\"postList.length >= 1\"\n                class=\"orderby-button\"\n            >Les + anciennes d'abord\n                <img\n                    src=\"../assets/arrow.png\"\n                    alt=\"Flèche de tri ascendante\"\n                    class=\"flipped\"\n                />\n            </button>\n            <Post\n                v-for=\"post in ascList\"\n                v-bind:key=\"post.postID\"\n                :postID=\"post.postID\"\n                @post-deleted=\"getPostsList\"\n            ></Post>\n        </div>\n    </div>\n</template>\n\n<script>\nimport HomeNav from '../components/HomeNav'\nimport Post from '../components/Post'\n\nexport default {\n    name: 'Feed',\n    components: {\n        HomeNav,\n        Post\n    },\n    data() {\n        return {\n            postList: [],\n            updateMessage: \"\",\n            mostRecent: true,\n        }\n    },\n    computed: {\n        ascList() {\n            let mostAncient = this.postList.slice().sort( (a, b) => {\n              return new Date(a.dateSend).getTime() - new Date(b.dateSend).getTime();\n            });\n            return mostAncient;\n        },\n        descList() {\n            let mostRecent = this.postList.slice().sort( (a, b) => {\n              return new Date(b.dateSend).getTime() - new Date(a.dateSend).getTime();\n            });\n            return mostRecent;\n        }\n    },\n    methods: {\n        getPostsList() {\n            let url = `http://localhost:3000/api/post`;\n            let options = {\n                method: \"GET\",\n                headers: {\n                  'Authorization': 'Bearer ' + localStorage.getItem(\"token\"),\n                }\n            };\n            fetch(url, options)\n                .then(response => response.json())\n                .then((data) => {\n                    if (data[0]) {\n                        this.postList = data;\n                    }\n                    else {\n                        this.postList = data;\n                        this.updateMessage = \"Soyez le premier à publier !\";\n                    }\n                })\n              .catch(error => console.log(error))\n        }\n    },\n    mounted() {\n        this.getPostsList();\n    }\n}\n</script>\n\n<style lang=\"css\">\n@import \"../style/style.css\";\n</style>"]}]}