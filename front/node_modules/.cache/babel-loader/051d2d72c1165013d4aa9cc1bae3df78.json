{"remainingRequest":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\src\\components\\Comment.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\src\\components\\Comment.vue","mtime":1609954819000},{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636700259092},{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1636700283426},{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636700259092},{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1636700288853}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDb21tZW50IiwKICBwcm9wczogewogICAgY29tbWVudElEOiB7CiAgICAgIHR5cGU6IE51bWJlcgogICAgfSwKICAgIHBvc3RJRDogewogICAgICB0eXBlOiBOdW1iZXIKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb21tZW50SW5mbzogewogICAgICAgIHVzZXJJRDogIiIsCiAgICAgICAgY29tbWVudFRleHQ6ICIiLAogICAgICAgIGRhdGVTZW5kOiAiIgogICAgICB9LAogICAgICB1c2VySW5mbzogewogICAgICAgIGZpcnN0TmFtZTogIiIsCiAgICAgICAgbGFzdE5hbWU6ICIiCiAgICAgIH0sCiAgICAgIHZpc2l0b3JJRDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJJRCIpLAogICAgICBhZG1pblJpZ2h0czogbG9jYWxTdG9yYWdlLmdldEl0ZW0oImFkbWluUmlnaHRzIikKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgY29udmVydERhdGU6IGZ1bmN0aW9uIGNvbnZlcnREYXRlKCkgewogICAgICB2YXIgZGF0ZSA9IHRoaXMuY29tbWVudEluZm8uZGF0ZVNlbmQuc3BsaXQoL1stIFQgOl0vKTsKICAgICAgdmFyIGNvbnZlcnREYXRlID0gIiIuY29uY2F0KGRhdGVbMl0sICIvIikuY29uY2F0KGRhdGVbMV0sICIvIikuY29uY2F0KGRhdGVbMF0pOwogICAgICByZXR1cm4gY29udmVydERhdGU7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRDb21tZW50SW5mbzogZnVuY3Rpb24gZ2V0Q29tbWVudEluZm8oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgdXJsID0gImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvY29tbWVudC8iLmNvbmNhdCh0aGlzLnBvc3RJRCwgIi8iKS5jb25jYXQodGhpcy5jb21tZW50SUQpOwogICAgICB2YXIgb3B0aW9ucyA9IHsKICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIikKICAgICAgICB9CiAgICAgIH07CiAgICAgIGZldGNoKHVybCwgb3B0aW9ucykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgaWYgKGRhdGFbMF0pIHsKICAgICAgICAgIF90aGlzLmNvbW1lbnRJbmZvLnVzZXJJRCA9IGRhdGFbMF0udXNlcklEOwogICAgICAgICAgX3RoaXMuY29tbWVudEluZm8uY29tbWVudFRleHQgPSBkYXRhWzBdLmNvbW1lbnRUZXh0OwogICAgICAgICAgX3RoaXMuY29tbWVudEluZm8uZGF0ZVNlbmQgPSBkYXRhWzBdLmRhdGVTZW5kOwoKICAgICAgICAgIF90aGlzLmdldFVzZXJJbmZvKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLnVwZGF0ZU1lc3NhZ2UgPSBkYXRhLm1lc3NhZ2U7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZXR1cm4gY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRVc2VySW5mbzogZnVuY3Rpb24gZ2V0VXNlckluZm8oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIHVybCA9ICJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3VzZXIvIi5jb25jYXQodGhpcy5jb21tZW50SW5mby51c2VySUQpOwogICAgICB2YXIgb3B0aW9ucyA9IHsKICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIikKICAgICAgICB9CiAgICAgIH07CiAgICAgIGZldGNoKHVybCwgb3B0aW9ucykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgX3RoaXMyLnVzZXJJbmZvLmZpcnN0TmFtZSA9IGRhdGFbMF0uZmlyc3ROYW1lOwogICAgICAgIF90aGlzMi51c2VySW5mby5sYXN0TmFtZSA9IGRhdGFbMF0ubGFzdE5hbWU7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZUNvbW1lbnQ6IGZ1bmN0aW9uIGRlbGV0ZUNvbW1lbnQoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIHVybCA9ICJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2NvbW1lbnQvIi5jb25jYXQodGhpcy5wb3N0SUQsICIvIikuY29uY2F0KHRoaXMuY29tbWVudElEKTsKICAgICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgICAgbWV0aG9kOiAiREVMRVRFIiwKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpCiAgICAgICAgfQogICAgICB9OwogICAgICBmZXRjaCh1cmwsIG9wdGlvbnMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMzLiRlbWl0KCJjb21tZW50LWRlbGV0ZWQiKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRDb21tZW50SW5mbygpOwogIH0KfTs="},{"version":3,"sources":["Comment.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"comment\" :commentID=\"commentID\" :postID=\"postID\">\n        <p class=\"comment-info\">Le {{ convertDate }}, {{ userInfo.firstName }} {{ userInfo.lastName }} a répondu :\n            <img\n                v-if=\"commentInfo.userID == visitorID || adminRights == 1\"\n                @click=\"deleteComment\"\n                src=\"../assets/trash.png\"\n                alt=\"Icône de suppression\"\n            />\n        </p>\n        <p class=\"comment-content\">\" {{ commentInfo.commentText }} \"</p>\n    </div>\n</template>        \n\n<script>\nexport default {\n    name: \"Comment\",\n    props: {\n        commentID: {\n            type: Number\n        },\n        postID: {\n            type: Number\n        }\n    },\n    data: () => {\n        return {\n            commentInfo: {\n                userID: \"\",\n                commentText: \"\",\n                dateSend: \"\"\n            },\n            userInfo: {\n                firstName: \"\",\n                lastName: \"\"\n            },\n            visitorID: localStorage.getItem(\"userID\"),\n            adminRights: localStorage.getItem(\"adminRights\")\n        }\n    },\n    computed: {\n        convertDate() {\n            let date = this.commentInfo.dateSend.split(/[- T :]/);\n            let convertDate = `${date[2]}/${date[1]}/${date[0]}`;\n            return convertDate;\n        }\n    },\n    methods: {\n        getCommentInfo() {\n            let url = `http://localhost:3000/api/comment/${ this.postID }/${ this.commentID}`;\n            let options = {\n                method: \"GET\",\n                headers: {\n                    'Authorization': 'Bearer ' + localStorage.getItem(\"token\"),\n                }\n            };\n            fetch(url, options)\n                .then(response => response.json())\n                .then((data) => {\n                    if (data[0]) {\n                        this.commentInfo.userID = data[0].userID;\n                        this.commentInfo.commentText = data[0].commentText;\n                        this.commentInfo.dateSend = data[0].dateSend;\n                        this.getUserInfo();\n                    }\n                    else {\n                        this.updateMessage = data.message;\n                    }\n                })\n                .catch(error => console.log(error))\n        },\n        getUserInfo() {\n            let url = `http://localhost:3000/api/user/${ this.commentInfo.userID }`;\n            let options = {\n                method: \"GET\",\n                headers: {\n                    'Authorization': 'Bearer ' + localStorage.getItem(\"token\"),\n                }\n            };\n            fetch(url, options)\n                .then(response => response.json())\n                .then(data => {\n                    this.userInfo.firstName = data[0].firstName;\n                    this.userInfo.lastName = data[0].lastName;\n                })\n                .catch(error => console.log(error))\n        },\n        deleteComment() {\n            let url = `http://localhost:3000/api/comment/${ this.postID }/${ this.commentID}`;\n            let options = {\n                method: \"DELETE\",\n                headers: {\n                    'Authorization': 'Bearer ' + localStorage.getItem(\"token\"),\n                }\n            };\n            fetch(url, options)\n                .then(response => response.json())\n                .then(() => {\n                    this.$emit(\"comment-deleted\");\n                })\n                .catch(error => console.log(error))\n        },\n    },\n    mounted() {\n        this.getCommentInfo();\n    }\n}\n</script>\n\n<style lang=\"css\">\n@import '../style/style.css';\n</style>"],"sourceRoot":"src/components"}]}