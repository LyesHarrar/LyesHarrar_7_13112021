{"remainingRequest":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\src\\views\\Feed.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\src\\views\\Feed.vue","mtime":1609954819000},{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636700259092},{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1636700283426},{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1636700259092},{"path":"C:\\Users\\X240\\Desktop\\OpenClassrooms\\groupomania-lyes\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1636700288853}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEhvbWVOYXYgZnJvbSAnLi4vY29tcG9uZW50cy9Ib21lTmF2JzsKaW1wb3J0IFBvc3QgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3N0JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdGZWVkJywKICBjb21wb25lbnRzOiB7CiAgICBIb21lTmF2OiBIb21lTmF2LAogICAgUG9zdDogUG9zdAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBvc3RMaXN0OiBbXSwKICAgICAgdXBkYXRlTWVzc2FnZTogIiIsCiAgICAgIG1vc3RSZWNlbnQ6IHRydWUKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgYXNjTGlzdDogZnVuY3Rpb24gYXNjTGlzdCgpIHsKICAgICAgdmFyIG1vc3RBbmNpZW50ID0gdGhpcy5wb3N0TGlzdC5zbGljZSgpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICByZXR1cm4gbmV3IERhdGUoYS5kYXRlU2VuZCkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYi5kYXRlU2VuZCkuZ2V0VGltZSgpOwogICAgICB9KTsKICAgICAgcmV0dXJuIG1vc3RBbmNpZW50OwogICAgfSwKICAgIGRlc2NMaXN0OiBmdW5jdGlvbiBkZXNjTGlzdCgpIHsKICAgICAgdmFyIG1vc3RSZWNlbnQgPSB0aGlzLnBvc3RMaXN0LnNsaWNlKCkuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgIHJldHVybiBuZXcgRGF0ZShiLmRhdGVTZW5kKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhLmRhdGVTZW5kKS5nZXRUaW1lKCk7CiAgICAgIH0pOwogICAgICByZXR1cm4gbW9zdFJlY2VudDsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFBvc3RzTGlzdDogZnVuY3Rpb24gZ2V0UG9zdHNMaXN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHVybCA9ICJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3Bvc3QiOwogICAgICB2YXIgb3B0aW9ucyA9IHsKICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIikKICAgICAgICB9CiAgICAgIH07CiAgICAgIGZldGNoKHVybCwgb3B0aW9ucykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgaWYgKGRhdGFbMF0pIHsKICAgICAgICAgIF90aGlzLnBvc3RMaXN0ID0gZGF0YTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMucG9zdExpc3QgPSBkYXRhOwogICAgICAgICAgX3RoaXMudXBkYXRlTWVzc2FnZSA9ICJTb3lleiBsZSBwcmVtaWVyIMOgIHB1YmxpZXIgISI7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZXR1cm4gY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldFBvc3RzTGlzdCgpOwogIH0KfTs="},{"version":3,"sources":["Feed.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA,OAAA,OAAA,MAAA,uBAAA;AACA,OAAA,IAAA,MAAA,oBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,OAAA,EAAA,OADA;AAEA,IAAA,IAAA,EAAA;AAFA,GAFA;AAMA,EAAA,IANA,kBAMA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,aAAA,EAAA,EAFA;AAGA,MAAA,UAAA,EAAA;AAHA,KAAA;AAKA,GAZA;AAaA,EAAA,QAAA,EAAA;AACA,IAAA,OADA,qBACA;AACA,UAAA,WAAA,GAAA,KAAA,QAAA,CAAA,KAAA,GAAA,IAAA,CAAA,UAAA,CAAA,EAAA,CAAA,EAAA;AACA,eAAA,IAAA,IAAA,CAAA,CAAA,CAAA,QAAA,EAAA,OAAA,KAAA,IAAA,IAAA,CAAA,CAAA,CAAA,QAAA,EAAA,OAAA,EAAA;AACA,OAFA,CAAA;AAGA,aAAA,WAAA;AACA,KANA;AAOA,IAAA,QAPA,sBAOA;AACA,UAAA,UAAA,GAAA,KAAA,QAAA,CAAA,KAAA,GAAA,IAAA,CAAA,UAAA,CAAA,EAAA,CAAA,EAAA;AACA,eAAA,IAAA,IAAA,CAAA,CAAA,CAAA,QAAA,EAAA,OAAA,KAAA,IAAA,IAAA,CAAA,CAAA,CAAA,QAAA,EAAA,OAAA,EAAA;AACA,OAFA,CAAA;AAGA,aAAA,UAAA;AACA;AAZA,GAbA;AA2BA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,0BACA;AAAA;;AACA,UAAA,GAAA,mCAAA;AACA,UAAA,OAAA,GAAA;AACA,QAAA,MAAA,EAAA,KADA;AAEA,QAAA,OAAA,EAAA;AACA,2BAAA,YAAA,YAAA,CAAA,OAAA,CAAA,OAAA;AADA;AAFA,OAAA;AAMA,MAAA,KAAA,CAAA,GAAA,EAAA,OAAA,CAAA,CACA,IADA,CACA,UAAA,QAAA;AAAA,eAAA,QAAA,CAAA,IAAA,EAAA;AAAA,OADA,EAEA,IAFA,CAEA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,CAAA,CAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,QAAA,GAAA,IAAA;AACA,SAFA,MAGA;AACA,UAAA,KAAA,CAAA,QAAA,GAAA,IAAA;AACA,UAAA,KAAA,CAAA,aAAA,GAAA,8BAAA;AACA;AACA,OAVA,EAWA,KAXA,CAWA,UAAA,KAAA;AAAA,eAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA;AAAA,OAXA;AAYA;AArBA,GA3BA;AAkDA,EAAA,OAlDA,qBAkDA;AACA,SAAA,YAAA;AACA;AApDA,CAAA","sourcesContent":["<template>\n    <div class=\"container\">\n        <HomeNav></HomeNav>\n        <h1 id=\"forum-title\">Fil d'actualité</h1>\n        <h2 v-if=\"updateMessage.length >= 1\" class=\"alert-msg\">{{ updateMessage }}</h2>\n        <p v-if=\"postList.length >= 1\">{{ postList.length }} publication<span v-if=\"postList.length >= 2\">s</span></p>\n\n        <div v-if=\"mostRecent\" class=\"post-comment-container\">\n            <button\n                @click=\"mostRecent = false\"\n                v-if=\"postList.length >= 1\"\n                class=\"orderby-button\"\n                >Les + récentes d'abord\n                <img src=\"../assets/arrow.png\" alt=\"Flèche de tri descendante\" />\n            </button>\n            <Post\n                v-for=\"post in descList\"\n                v-bind:key=\"post.postID\"\n                :postID=\"post.postID\"\n                @post-deleted=\"getPostsList\"\n            ></Post>\n        </div>\n\n        <div v-if=\"!mostRecent\" class=\"post-comment-container\">\n            <button\n                @click=\"mostRecent = true\"\n                v-if=\"postList.length >= 1\"\n                class=\"orderby-button\"\n            >Les + anciennes d'abord\n                <img\n                    src=\"../assets/arrow.png\"\n                    alt=\"Flèche de tri ascendante\"\n                    class=\"flipped\"\n                />\n            </button>\n            <Post\n                v-for=\"post in ascList\"\n                v-bind:key=\"post.postID\"\n                :postID=\"post.postID\"\n                @post-deleted=\"getPostsList\"\n            ></Post>\n        </div>\n    </div>\n</template>\n\n<script>\nimport HomeNav from '../components/HomeNav'\nimport Post from '../components/Post'\n\nexport default {\n    name: 'Feed',\n    components: {\n        HomeNav,\n        Post\n    },\n    data() {\n        return {\n            postList: [],\n            updateMessage: \"\",\n            mostRecent: true,\n        }\n    },\n    computed: {\n        ascList() {\n            let mostAncient = this.postList.slice().sort( (a, b) => {\n              return new Date(a.dateSend).getTime() - new Date(b.dateSend).getTime();\n            });\n            return mostAncient;\n        },\n        descList() {\n            let mostRecent = this.postList.slice().sort( (a, b) => {\n              return new Date(b.dateSend).getTime() - new Date(a.dateSend).getTime();\n            });\n            return mostRecent;\n        }\n    },\n    methods: {\n        getPostsList() {\n            let url = `http://localhost:3000/api/post`;\n            let options = {\n                method: \"GET\",\n                headers: {\n                  'Authorization': 'Bearer ' + localStorage.getItem(\"token\"),\n                }\n            };\n            fetch(url, options)\n                .then(response => response.json())\n                .then((data) => {\n                    if (data[0]) {\n                        this.postList = data;\n                    }\n                    else {\n                        this.postList = data;\n                        this.updateMessage = \"Soyez le premier à publier !\";\n                    }\n                })\n              .catch(error => console.log(error))\n        }\n    },\n    mounted() {\n        this.getPostsList();\n    }\n}\n</script>\n\n<style lang=\"css\">\n@import \"../style/style.css\";\n</style>"],"sourceRoot":"src/views"}]}